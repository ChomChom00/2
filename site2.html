<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rainbow Scroll Poem</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      font-family: Sans-serif;
      cursor: url('https://emojicdn.elk.sh/â˜'), auto;
      overflow-x: hidden;
    }
    body {
      background: white;
      transition: background 0.5s;
      color: rgba(0, 0, 0, 0.05);
    }
    .content {
      height: 10000px;
      padding: 20px;
      font-size: 2rem;
      position: relative;
    }
    .poem-line {
      position: absolute;
      width: 100%;
      left: 0;
      opacity: 0;
      transition: opacity 0.5s;
      pointer-events: none;
      text-shadow: 0 0 8px rgba(0,0,0,0.2);
    }
    .visible {
      opacity: 1 !important;
      color: rgba(0, 0, 0, 0.85);
    }
    .floating-word {
      position: absolute;
      font-size: 1.5rem;
      opacity: 0.6;
      cursor: pointer;
      transition: transform 1s linear, top 2s ease-out;
      animation: drift 4s ease-in-out infinite;
      z-index: 1002;
    }
    @keyframes drift {
      0% { transform: translateY(0px) translateX(0px); }
      50% { transform: translateY(-10px) translateX(5px); }
      100% { transform: translateY(0px) translateX(0px); }
    }
    .fallen-word {
      position: relative;
      font-size: 1.1rem;
      opacity: 1;
      white-space: nowrap;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
    }
    #cloud {
      position: fixed;
      top: 0;
      left: 0;
      font-size: 2rem;
      pointer-events: none;
      z-index: 1001;
    }
    #fallen-container {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 10px;
      background: rgba(255,255,255,0.8);
      font-size: 1rem;
      z-index: 1002;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
    }
    .clicked {
      animation: glowFade 1.5s forwards;
    }
    @keyframes glowFade {
      0% {
        text-shadow: 0 0 5px white, 0 0 10px white;
        opacity: 1;
      }
      100% {
        text-shadow: 0 0 20px white, 0 0 40px white;
        opacity: 0;
      }
    }
    .popup-phrase {
      position: absolute;
      font-size: 1.2rem;
      background: rgba(255,255,255,0.9);
      border: 1px solid #ccc;
      padding: 4px 8px;
      border-radius: 6px;
      z-index: 2000;
      pointer-events: none;
      animation: fadeOut 2.5s forwards;
    }
    @keyframes fadeOut {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-20px); }
    }
    #final-line {
      text-align: center;
      font-size: 2rem;
      margin-top: 200px;
      color: black;
      display: none;
    }
  </style>
</head>
<body>
  <div id="cloud">â˜ï¸</div>
  <canvas id="drawCanvas"></canvas>
  <div id="fallen-container"></div>
  <div class="content">
    <div id="scroll-guide">
      Scroll down to see the background color change like a rainbow ğŸŒˆ<br>
      And hear the silence of a disappearing poem ğŸ¹<br><br>
      ğŸ‘‰ Enter to enhance text <br><br> Click and drag to draw. <br><br>Press E to toggle eraser,
    </div>
    <div class="poem-line" style="top: 1000px;">ë‚˜ëŠ” ì–´ë”˜ê°€ì— ë‚¨ê²¨ì§„ ë§ì´ì—ˆë‹¤</div>
    <div class="poem-line" style="top: 2000px;">í¬ë¯¸í•œ ì†Œë¦¬ë¡œ ë– ë‹¤ë‹ˆë©°</div>
    <div class="poem-line" style="top: 3000px;">ëˆ„êµ°ê°€ì˜ ê·€ì— ë‹¿ê¸°ë¥¼ ê¸°ë‹¤ë ¸ë‹¤</div>
    <div class="poem-line" style="top: 4000px;">ì¢…ì´ ìœ„ì— ê·¸ë ¤ì§„ ì¹¨ë¬µ</div>
    <div class="poem-line" style="top: 5000px;">ê¸°ì–µì€ ë¬´ì§€ê°œë¹›ìœ¼ë¡œ ë²ˆì¡Œë‹¤</div>
    <div class="poem-line" style="top: 6000px;">ë§ë“¤ì€ ë‹¤ì‹œ ì‚¬ë¼ì§€ê³ </div>
    <div class="poem-line" style="top: 7000px;">êµ¬ë¦„ ë’¤í¸ì— ìˆ¨ì—ˆë‹¤</div>
    <div class="poem-line" style="top: 8000px;">ì¹¨ë¬µë§Œì´ ë°”ëŒì— ì‹¤ë ¤</div>
    <div class="poem-line" style="top: 9000px;">ìš°ë¦¬ ì‚¬ì´ë¥¼ ê°€ë¡œì§ˆë €ë‹¤</div>
    <div id="final-line">ê¸°ì–µì˜ ê°€ì¥ ëì— ë‹¿ì•˜ì„ ë•Œ, ìš°ë¦¬ëŠ” ë¹„ë¡œì†Œ ë§ì—†ì´ ì—°ê²°ëœë‹¤</div>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const poemLines = document.querySelectorAll('.poem-line');
      let textOpacity = 0.05;
      window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;
        document.body.style.background = `hsl(${scrollY % 360}, 100%, 85%)`;
        poemLines.forEach(line => {
          const lineTop = parseInt(line.style.top);
          if (scrollY > lineTop - window.innerHeight / 2 && scrollY < lineTop + window.innerHeight / 2) {
            line.classList.add('visible');
          } else {
            line.classList.remove('visible');
          }
        });
        const finalLine = document.getElementById('final-line');
        if (scrollY > document.body.scrollHeight - window.innerHeight - 50) {
          finalLine.style.display = 'block';
        } else {
          finalLine.style.display = 'none';
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          textOpacity = Math.min(1, textOpacity + 0.1);
          document.body.style.color = `rgba(0, 0, 0, ${textOpacity})`;
        }
      });

      const canvas = document.getElementById('drawCanvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let drawing = false;
      let isEraser = false;

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resizeCanvas);

      document.addEventListener('mousedown', () => drawing = true);
      document.addEventListener('mouseup', () => drawing = false);

      document.addEventListener('mousemove', (e) => {
        const cloud = document.getElementById('cloud');
        cloud.style.transform = `translate(${e.clientX + 10}px, ${e.clientY - 10}px)`;
        if (!drawing) return;
        ctx.fillStyle = isEraser ? 'white' : 'rgba(0, 0, 0, 0.1)';
        ctx.beginPath();
        ctx.arc(e.clientX, e.clientY, 5, 0, Math.PI * 2);
        ctx.fill();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'e' || e.key === 'E') {
          isEraser = !isEraser;
        }
      });

      const words = ["ê¸°ì–µ", "ì¡°ê°", "ë°”ëŒ", "ì–´ë‘ ", "ë¹›", "ì†Œë¦¬", "ì¢…ì´", "ì‹œê°„", "ë§", "ì¹¨ë¬µ",
        "ê±¸ìŒ", "ìŠí˜", "ë¬´ì§€ê°œ", "ë°œìêµ­", "ì˜¨ê¸°", "ëª©ì†Œë¦¬", "ê·€", "íŒŒí¸", "ì„ ìœ¨", "íˆ¬ëª…"];

      const phrases = [
        "ë°¤ì˜ ì–¸ì €ë¦¬ì—ì„œ ë“¤ë ¤ì˜¤ëŠ” ì†ì‚­ì„",
        "ë¬´ì§€ê°œ ì•„ë˜ ê°ì¶°ì§„ ì´ë¦„", 
        "í…… ë¹ˆ ê³µê°„ì€ ë§ì´ ê°€ì¥ ë§ì€ ì¥ì†Œì˜€ë‹¤",
        "ì•„ì´ì˜ ëª©ì†Œë¦¬ëŠ” ê°€ì¥ ê¹Šì€ ìš¸ë¦¼ì¸ ë™ì‹œì— ì§ˆë¬¸ì´ì—ˆë‹¤",
        "ì‚­ì œëœ ë§ë“¤ì€ ì˜¤íˆë ¤ ë” í¬ê²Œ ìš¸ë¦¬ëŠ” ë©”ì•„ë¦¬ì˜€ë‹¤",
        "ë¶€ì„œì§„ ì¥ë‚œê°ì€ ë˜ ë‹¤ë¥¸ ì–¸ì–´ê°€ ìˆ¨ì–´ ìˆëŠ” ì¥ì¹˜ì˜€ë‹¤",
        "ì ì ìœ„ì˜ ë¬¸ì¥ì€ ì½íˆì§€ ì•ŠëŠ” ê¸°í˜¸ì˜€ë‹¤",
        "ì ‘íŒ ì¢…ì´í•™ì€ ë°”ëŒì„ ê¸°ì–µí•˜ëŠ” í˜•ìƒì´ì—ˆë‹¤",
        "í•„í„° ì† ëª©ì†Œë¦¬ëŠ” ëˆ„êµ¬ì˜ ê²ƒë„ ì•„ë‹Œ ë³€í˜•ëœ ì‹œê°„ì´ì—ˆë‹¤",
        "ì´ ëª¨ë“  ê²ƒì€ ê²°êµ­ í•˜ë‚˜ì˜ ì´ë¯¸ì§€ì¸ ë™ì‹œì— ì‚¬ë¼ì§ì´ì—ˆë‹¤",
        "ì§€ì›Œì§„ ë¬¸ì¥ì˜ ë§ˆì§€ë§‰ ë‹¨ì–´",
        "ê¸°ì–µì€ ì¢…ì´ë³´ë‹¤ ì–‡ì€ í‹ˆì—ì„œ ìë¼ë‚˜",
        "ë§ì˜ ê·¸ë¦¼ìê°€ ë¹›ë³´ë‹¤ ë¨¼ì € ë„ì°©í•´",
        "ì†ëì— ë‚¨ì€ ë¬¸ì¥ í•˜ë‚˜",
        "ì†Œë¦¬ëŠ” ì—†ì§€ë§Œ ì˜ë¯¸ëŠ” ë– ë‹¤ë‹ˆê³ ",
        "ê·€ê°€ ë¨¼ì € ì•Œì•„ì±ˆ ê·¸ë¦¬ì›€"
      ];

      const fallenContainer = document.getElementById('fallen-container');
      const scrollHeight = document.body.scrollHeight;
      for (let i = 0; i < 50; i++) {
        const word = document.createElement('div');
        word.className = 'floating-word';
        word.textContent = words[Math.floor(Math.random() * words.length)];
        word.style.top = `${Math.random() * (scrollHeight - 100)}px`;
        word.style.left = `${Math.random() * window.innerWidth}px`;
        word.style.color = `hsl(${Math.random() * 360}, 80%, 40%)`;
        document.body.appendChild(word);
        word.addEventListener('click', (e) => {
          const phrase = phrases[Math.floor(Math.random() * phrases.length)];
          const fallen = document.createElement('div');
          fallen.className = 'fallen-word';
          fallen.textContent = phrase;
          fallenContainer.appendChild(fallen);

          const popup = document.createElement('div');
          popup.className = 'popup-phrase';
          popup.textContent = phrase;
          popup.style.top = `${e.clientY}px`;
          popup.style.left = `${e.clientX}px`;
          document.body.appendChild(popup);

          setTimeout(() => popup.remove(), 2500);

          word.classList.add('clicked');
          setTimeout(() => word.remove(), 1500);
        });
      }
    });
  </script>
</body>
</html>
